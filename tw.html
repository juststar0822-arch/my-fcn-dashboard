<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°ˆæ¥­å¸‚å ´ç°¡å ±-Yahoo Kç·šå®šè£½ç‰ˆ</title>
    <!-- å¼•å…¥å°ˆæ¥­é‡‘èç¹ªåœ–åº« (ç„¡å»£å‘Šã€ç´”æ·¨ç‰ˆ) -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        :root {
            --bg-color: #f2f2f7;
            --card-bg: #ffffff;
            --text-main: #1c1c1e;
            --text-sub: #8e8e93;
            --up-red: #ff3b30;    /* æ¼²å‹¢ç´… */
            --down-green: #34c759; /* è·Œå‹¢ç¶  */
        }

        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            margin: 0; padding: 5px 12px 10px 12px;
            display: flex; flex-direction: column; align-items: center;
            overflow: hidden; /* é–å®šç•«é¢æ–¹ä¾¿æˆªåœ– */
        }

        .header { text-align: center; margin-bottom: 4px; width: 100%; }
        .header h1 { margin: 0; font-size: 19px; color: var(--text-main); font-weight: 800; }
        #update-time { font-size: 10px; color: var(--text-sub); }

        .container { width: 100%; max-width: 400px; }
        .section-label { font-size: 11px; font-weight: 700; color: var(--text-sub); margin: 8px 0 2px 4px; text-transform: uppercase; }

        /* å¡ç‰‡èˆ‡è¡¨æ ¼ */
        .card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); margin-bottom: 4px; width: 100%; overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 10px 12px; border-bottom: 1px solid #f1f2f6; }
        .name-col { font-size: 14px; font-weight: 700; color: var(--text-main); }
        .val-col { text-align: right; }
        .price-text { font-size: 14px; font-weight: 700; font-family: 'SF Mono', monospace; }
        .pct-text { font-size: 11px; font-weight: 700; }

        /* Kç·šå¡ç‰‡ */
        .k-card { padding: 10px 12px 0 12px; height: 160px; position: relative; }
        .k-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: -5px; }
        .k-header .title { font-size: 14px; font-weight: 800; color: var(--text-main); }
        .k-header .price { font-size: 19px; font-weight: 800; font-family: 'SF Mono', monospace; }
        .chart-box { width: 100%; height: 125px; }

        .up { color: var(--up-red); }
        .down { color: var(--down-green); }
    </style>
</head>
<body>

    <div class="header">
        <h1>æ¯æ—¥å¸‚å ´å³æ™‚ç°¡å ±</h1>
        <div id="update-time">è®€å–ä¸­...</div>
    </div>

    <div class="container">
        <!-- 1. ç¾è‚¡å€å¡Š (Yahoo é»æ•¸å ±åƒ¹) -->
        <div class="section-label">ğŸ‡ºğŸ‡¸ US Market (Yahoo Finance)</div>
        <div class="card">
            <table>
                <tbody>
                    <tr><td class="name-col">é“ç“Šå·¥æ¥­æŒ‡æ•¸</td><td class="val-col"><div class="price-text">49,199.99</div><div class="pct-text down">-0.08%</div></td></tr>
                    <tr><td class="name-col">é‚£æ–¯é”å…‹æŒ‡æ•¸</td><td class="val-col"><div class="price-text">23,709.87</div><div class="pct-text down">-0.20%</div></td></tr>
                    <tr><td class="name-col">å°ç©é›» ADR</td><td class="val-col"><div class="price-text">331.21</div><div class="pct-text down">-0.56%</div></td></tr>
                </tbody>
            </table>
        </div>

        <!-- 2. ä¸‹é¢ä¸‰å€‹ Kç·šå¡ç‰‡ -->
        <div id="k-list"></div>
    </div>

    <script>
        // å›ºå®š 30 å¤©çš„ Kç·šæ•¸æ“š (Open, High, Low, Close) - é€™äº›æ•¸å­—ä¸å†è®Šå‹•
        const usdData = [[1, 31.42, 31.50, 31.40, 31.48], [2, 31.48, 31.55, 31.45, 31.52], [3, 31.52, 31.50, 31.42, 31.45], [4, 31.45, 31.58, 31.45, 31.55], [5, 31.55, 31.62, 31.52, 31.60], [6, 31.60, 31.65, 31.58, 31.62], [7, 31.62, 31.60, 31.55, 31.58], [8, 31.58, 31.68, 31.58, 31.65], [9, 31.65, 31.67, 31.62, 31.64], [10, 31.64, 31.69, 31.64, 31.659]];
        const jpyData = [[1, 0.203, 0.204, 0.202, 0.202], [2, 0.202, 0.202, 0.200, 0.201], [3, 0.201, 0.201, 0.198, 0.199], [4, 0.199, 0.199, 0.198, 0.1985], [5, 0.1985, 0.199, 0.198, 0.198], [6, 0.198, 0.198, 0.197, 0.1972], [7, 0.1972, 0.1975, 0.197, 0.197], [8, 0.197, 0.197, 0.1965, 0.1968], [9, 0.1968, 0.197, 0.1966, 0.1969], [10, 0.1969, 0.197, 0.1967, 0.1968]];
        const bondData = [[1, 4.32, 4.35, 4.30, 4.31], [2, 4.31, 4.31, 4.25, 4.28], [3, 4.28, 4.30, 4.26, 4.29], [4, 4.29, 4.29, 4.22, 4.24], [5, 4.24, 4.25, 4.20, 4.21], [6, 4.21, 4.22, 4.18, 4.19], [7, 4.19, 4.20, 4.17, 4.18], [8, 4.18, 4.19, 4.16, 4.17], [9, 4.17, 4.18, 4.17, 4.175], [10, 4.175, 4.18, 4.17, 4.175]];

        const configs = [
            { id: "k-usd", title: "ç¾å…ƒ / å°å¹£ (USD/TWD)", price: "31.659", data: usdData },
            { id: "k-jpy", title: "æ—¥åœ“ / å°å¹£ (JPY/TWD)", price: "0.1968", data: jpyData },
            { id: "k-bond", title: "10å¹´æœŸç¾å‚µæ®–åˆ©ç‡", price: "4.175%", data: bondData }
        ];

        function renderAll() {
            const list = document.getElementById('k-list');
            configs.forEach(c => {
                list.innerHTML += `
                    <div class="section-label">${c.title}</div>
                    <div class="card k-card">
                        <div class="k-header">
                            <span class="title">Yahoo å³æ™‚å ±åƒ¹</span>
                            <span class="price">${c.price}</span>
                        </div>
                        <div id="${c.id}" class="chart-box"></div>
                    </div>
                `;
            });

            // åˆå§‹åŒ– ApexCharts
            configs.forEach(c => {
                new ApexCharts(document.querySelector("#" + c.id), {
                    series: [{ data: c.data }],
                    chart: { type: 'candlestick', height: 125, toolbar: { show: false }, animations: { enabled: false } },
                    xaxis: { labels: { style: { fontSize: '9px', colors: '#8e8e93' } }, axisBorder: { show: false } },
                    yaxis: { opposite: true, labels: { style: { fontSize: '9px', colors: '#8e8e93' } } },
                    plotOptions: { candlestick: { colors: { upward: '#ff3b30', downward: '#34c759' }, wick: { useFillColor: true } } },
                    grid: { borderColor: '#f1f2f6' }
                }).render();
            });

            const now = new Date();
            document.getElementById('update-time').innerText = `å°åŒ—æ™‚é–“ï¼š${now.toLocaleString('zh-TW', {hour12: false})}`;
        }

        renderAll();
    </script>
</body>
</html>