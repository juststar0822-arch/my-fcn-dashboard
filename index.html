<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCN è³‡ç”¢ç®¡ç†ç³»çµ±</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar-item:hover { background-color: #374151; cursor: pointer; }
        .active { background-color: #2563eb !important; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div id="app" class="flex h-screen">
        
        <!-- å·¦å´åˆ—è¡¨ -->
        <div class="w-64 bg-slate-800 text-white flex flex-col">
            <div class="p-6 text-2xl font-bold border-b border-slate-700">FCN Manager</div>
            <nav class="flex-1 mt-4">
                <div @click="currentView = 'all'" :class="['p-4 sidebar-item', currentView === 'all' ? 'active' : '']">
                    ğŸ‘¤ å®¢æˆ¶è³‡æ–™/å…¨é«”åº«å­˜
                </div>
                <div @click="currentView = 'ko'" :class="['p-4 sidebar-item text-green-400', currentView === 'ko' ? 'active' : '']">
                    ğŸš€ å³å°‡ KO æé†’
                </div>
                <div @click="currentView = 'ki'" :class="['p-4 sidebar-item text-red-400', currentView === 'ki' ? 'active' : '']">
                    âš ï¸ å·²è§¸åŠ KI è­¦ç¤º
                </div>
            </nav>
            <div class="p-4 text-xs text-slate-500 border-t border-slate-700">æ•¸æ“šæ¯ 5 ç§’è‡ªå‹•æ›´æ–°</div>
        </div>

        <!-- å³å´å…§å®¹å€ -->
        <div class="flex-1 overflow-y-auto p-8">
            <h1 class="text-2xl font-bold mb-6">{{ viewTitle }}</h1>

            <!-- æ•¸æ“šåˆ—è¡¨ -->
            <div class="bg-white shadow-md rounded-lg overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 border-b">
                        <tr>
                            <th class="p-4">ç”¢å“ä»£ç¢¼</th>
                            <th class="p-4">æ›é‰¤æ¨™çš„</th>
                            <th class="p-4 text-right">ç•¶å‰è‚¡åƒ¹</th>
                            <th class="p-4 text-right">KO åƒ¹</th>
                            <th class="p-4 text-right">KI åƒ¹</th>
                            <th class="p-4 text-center">ç‹€æ…‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="item in filteredList" :key="item.id" class="border-b hover:bg-gray-50">
                            <td class="p-4 font-mono">{{ item.id }}</td>
                            <td class="p-4 font-bold text-blue-600">{{ item.underlying }}</td>
                            <td class="p-4 text-right font-bold" :class="item.priceColor">
                                ${{ item.currentPrice.toFixed(2) }}
                            </td>
                            <td class="p-4 text-right text-gray-500">${{ item.koPrice }}</td>
                            <td class="p-4 text-right text-gray-500">${{ item.kiPrice }}</td>
                            <td class="p-4 text-center">
                                <span v-if="item.isKI" class="bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm">å·²è§¸åŠ KI</span>
                                <span v-else-if="item.isNearKO" class="bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm">æ¥è¿‘ KO</span>
                                <span v-else class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm">æŒæœ‰ä¸­</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue
        createApp({
            data() {
                return {
                    currentView: 'all',
                    // æ¨¡æ“¬åº«å­˜æ•¸æ“š
                    inventory: [
                        { id: 'FCN-001', underlying: 'NVDA', currentPrice: 130.5, koPrice: 145, kiPrice: 105, priceColor: '' },
                        { id: 'FCN-002', underlying: 'TSLA', currentPrice: 175.2, koPrice: 180, kiPrice: 140, priceColor: '' },
                        { id: 'FCN-003', underlying: 'AAPL', currentPrice: 165.0, koPrice: 210, kiPrice: 170, priceColor: '' },
                        { id: 'FCN-004', underlying: 'MSFT', currentPrice: 410.5, koPrice: 450, kiPrice: 380, priceColor: '' }
                    ]
                }
            },
            computed: {
                viewTitle() {
                    if (this.currentView === 'all') return 'å®¢æˆ¶è³‡æ–™èˆ‡å®Œæ•´åº«å­˜';
                    if (this.currentView === 'ko') return 'ğŸš€ å³å°‡è‡ªå‹•è´–å› (KO) åå–®';
                    return 'âš ï¸ å·²è§¸åŠä¸‹é™ (KI) é è­¦åå–®';
                },
                // é€™è£¡å¯¦ä½œè‡ªå‹•éæ¿¾é‚è¼¯
                filteredList() {
                    return this.inventory.map(item => {
                        // è¨ˆç®—ç‹€æ…‹
                        item.isKI = item.currentPrice <= item.kiPrice;
                        item.isNearKO = item.currentPrice >= (item.koPrice * 0.95) && !item.isKI;
                        return item;
                    }).filter(item => {
                        if (this.currentView === 'all') return true;
                        if (this.currentView === 'ko') return item.isNearKO;
                        if (this.currentView === 'ki') return item.isKI;
                    });
                }
            },
            mounted() {
                // æ¨¡æ“¬è‚¡åƒ¹å³æ™‚æ›´æ–°
                setInterval(() => {
                    this.inventory.forEach(item => {
                        const change = (Math.random() - 0.5) * 2; // éš¨æ©Ÿæ³¢å‹•
                        const oldPrice = item.currentPrice;
                        item.currentPrice += change;
                        item.priceColor = item.currentPrice > oldPrice ? 'text-green-500' : 'text-red-500';
                    });
                }, 3000);
            }
        }).mount('#app')
    </script>
</body>
</html>
