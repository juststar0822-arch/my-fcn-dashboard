<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上新莊分行系統</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>[v-cloak] { display: none; } .fade-in { animation: fadeIn 0.4s ease-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }</style>
</head>
<body class="bg-[#0f172a] text-slate-200">
    <div id="app" v-cloak class="min-h-screen flex flex-col md:flex-row">
        <!-- 左導航 -->
        <div class="w-full md:w-72 bg-[#1e293b] p-6 border-b md:border-r border-slate-700 flex flex-col shadow-2xl">
            <div class="flex items-center gap-3 mb-10">
                <i class="fa-solid fa-landmark text-2xl text-blue-500"></i>
                <div><h1 class="text-xl font-bold">上新莊分行</h1><p class="text-[9px] text-slate-500 font-bold uppercase italic">Professional Dashboard</p></div>
            </div>
            <nav class="space-y-3 flex-1">
                <div @click="view = 'branch'" :class="navClass(view === 'branch')"><i class="fa-solid fa-chart-pie w-6"></i> 分行資產總覽</div>
                <div @click="view = 'client'" :class="navClass(view === 'client')"><i class="fa-solid fa-user-group w-6"></i> 客戶明細監控</div>
            </nav>
            <div class="mt-6 p-4 bg-slate-900/50 rounded-2xl border border-slate-800 text-[10px] text-emerald-500 font-bold">
                <div class="flex items-center gap-2"><div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>LIVE DATA</div>
                <div class="text-slate-600 mt-2">更新: {{ lastTime }}</div>
            </div>
        </div>
        <!-- 右內容 -->
        <div class="flex-1 p-4 md:p-10 overflow-y-auto">
            <div v-if="view === 'branch'" class="fade-in">
                <h2 class="text-4xl font-black mb-10 italic">Branch <span class="text-blue-500 font-black">Summary</span></h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div class="bg-gradient-to-br from-blue-600 to-indigo-800 p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden border border-blue-400/20">
                        <i class="fa-solid fa-yen-sign absolute right-[-5%] bottom-[-10%] text-[10rem] text-white/5 rotate-12"></i>
                        <p class="text-blue-100 font-bold text-xs uppercase tracking-widest mb-1">JPY 日幣資產總庫存</p>
                        <h3 class="text-6xl font-black">{{ formatNum(totalJPY) }} <span class="text-xl font-normal opacity-60">萬</span></h3>
                    </div>
                    <div class="bg-gradient-to-br from-emerald-600 to-teal-800 p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden border border-emerald-400/20">
                        <i class="fa-solid fa-dollar-sign absolute right-[-5%] bottom-[-10%] text-[10rem] text-white/5 rotate-12"></i>
                        <p class="text-emerald-100 font-bold text-xs uppercase tracking-widest mb-1">USD 美金資產總庫存</p>
                        <h3 class="text-6xl font-black">{{ formatNum(totalUSD) }} <span class="text-xl font-normal opacity-60">萬</span></h3>
                    </div>
                </div>
                <div class="bg-slate-800/40 rounded-[2rem] p-8 border border-slate-700 shadow-xl">
                    <h4 class="text-xl font-bold mb-6 italic"><i class="fa-solid fa-list-check text-blue-500 mr-2"></i>客戶資產清單快照</h4>
                    <div class="overflow-x-auto"><table class="w-full text-left"><thead class="text-slate-500 text-[10px] font-black uppercase tracking-widest border-b border-slate-700"><tr><th class="pb-4">客戶姓名</th><th class="pb-4">幣別</th><th class="pb-4">庫存金額</th><th class="pb-4">掛鉤標的</th><th class="pb-4 text-right">營業員</th></tr></thead><tbody class="text-sm font-bold divide-y divide-slate-800"><tr v-for="i in inventory" @click="goClient(i.client)" class="hover:bg-slate-700/40 transition cursor-pointer"><td class="py-5 text-slate-200">{{i.client}}</td><td class="py-5"><span :class="i.currency==='USD'?'text-emerald-400':'text-blue-400'" class="px-2 py-0.5 rounded bg-white/5 text-[10px]">{{i.currency}}</span></td><td class="py-5 font-mono text-lg">{{formatNum(i.amount)}}</td><td class="py-5 text-[10px] text-slate-500 font-normal">{{i.stocks.map(s=>s.code).join('/')}}</td><td class="py-5 text-right text-slate-500">{{i.sales}}</td></tr></tbody></table></div>
                </div>
            </div>
            <div v-if="view === 'client'" class="fade-in">
                <div class="flex justify-between items-center mb-10">
                    <h2 class="text-3xl font-black italic">Client <span class="text-blue-500">Monitoring</span></h2>
                    <select v-model="selectedClient" class="bg-slate-800 p-3 rounded-2xl border border-slate-700 font-black outline-none"><option v-for="n in clientNames" :value="n">{{n}}</option></select>
                </div>
                <div v-for="item in filteredList" class="bg-[#1e293b] rounded-[2.5rem] p-8 border border-slate-700 shadow-xl mb-10 overflow-hidden relative">
                    <div class="absolute right-[-2%] top-[-5%] text-9xl font-black text-white/[0.03] uppercase select-none italic tracking-tighter">{{item.currency}}</div>
                    <div class="flex justify-between items-start mb-10 relative z-10">
                        <div class="flex items-center gap-5">
                            <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center font-black text-2xl shadow-xl">{{item.client[0]}}</div>
                            <div><h4 class="text-2xl font-black">{{item.client}}</h4><p class="text-[10px] text-slate-500 font-bold uppercase mt-1">{{item.sn}} | 到期: {{item.expiry}}</p></div>
                        </div>
                        <div class="text-right"><p class="text-[10px] text-slate-500 font-black uppercase mb-1">庫存金額</p><p class="text-4xl font-black text-blue-400 font-mono tracking-tighter">{{formatNum(item.amount)}} <span class="text-sm font-bold opacity-60">{{item.currency}} 萬</span></p></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 relative z-10">
                        <div v-for="s in item.stocks" class="bg-slate-900/60 p-6 rounded-3xl border border-slate-700 transition hover:border-blue-500/50">
                            <div class="flex justify-between items-center mb-4"><span class="font-black text-blue-400 text-lg font-mono">{{s.code}}</span><span :class="perfClass(item, s)" class="text-[9px] font-black px-2 py-1 rounded shadow-sm">{{getPerf(item,s)}}%</span></div>
                            <div class="flex justify-between items-end"><div><p class="text-[9px] text-slate-500 font-bold mb-1 uppercase tracking-widest">現價參考</p><p class="text-2xl font-mono font-black" :class="s.color || 'text-slate-200'">{{formatNum(s.current)}}</p></div><div class="text-right"><p class="text-[9px] text-slate-500 font-bold mb-1 uppercase">KO 價</p><p class="text-xs font-mono font-bold text-slate-500">{{formatNum(s.ko)}}</p></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const { createApp } = Vue
        createApp({
            data() {
                return {
                    view: 'branch', selectedClient: '吳柏輝', lastTime: '',
                    inventory: [
                        { id:1, client:'吳柏輝', sn:'SNUBSELN01051', currency:'JPY', amount:5300, date:'2026/01/06', expiry:'2026/07/17', stocks:[{code:'6146 JP', ko:51490, current:56880},{code:'6501 JP', ko:5173, current:5124},{code:'7011 JP', ko:4047, current:4233}], sales:'吳坤達', coupon:12.76, koP:95, strikeP:70, kiP:55 },
                        { id:2, client:'江雪嬌', sn:'SNUBSELN01051', currency:'JPY', amount:200, date:'2026/01/06', expiry:'2026/07/17', stocks:[{code:'6146 JP', ko:51490, current:56880},{code:'6501 JP', ko:5173, current:5124},{code:'7011 JP', ko:4047, current:4233}], sales:'陳雅鈴', coupon:12.76, koP:95, strikeP:70, kiP:55 },
                        { id:3, client:'江雪嬌', sn:'SNUBSELN01051', currency:'JPY', amount:200, date:'2026/01/06', expiry:'2026/07/17', stocks:[{code:'6146 JP', ko:51490, current:56880},{code:'6501 JP', ko:5173, current:5124},{code:'7011 JP', ko:4047, current:4233}], sales:'陳雅鈴', coupon:12.76, koP:95, strikeP:70, kiP:55 },
                        { id:4, client:'陳潤纓', sn:'SNJPMELN01153', currency:'USD', amount:33, date:'2026/01/02', expiry:'2026/07/15', stocks:[{code:'NVDA US', ko:189, current:189},{code:'TSLA US', ko:438, current:431},{code:'TSM US', ko:320, current:319}], sales:'賴婉甄', coupon:18.00, koP:100, strikeP:80.76, kiP:0 },
                        { id:5, client:'劉介正', sn:'SNJPMELN01155', currency:'USD', amount:2, date:'2026/01/02', expiry:'2026/10/14', stocks:[{code:'AMD US', ko:223, current:210},{code:'NVDA US', ko:189, current:189},{code:'TSM US', ko:320, current:319}], sales:'黃思婷', coupon:11.53, koP:100, strikeP:75, kiP:65 },
                        { id:6, client:'江雪嬌', sn:'SNNOELN01419', currency:'USD', amount:11, date:'2025/12/31', expiry:'2026/07/10', stocks:[{code:'MU US', ko:285, current:340},{code:'NVDA US', ko:187, current:189},{code:'TSLA US', ko:450, current:431}], sales:'陳雅鈴', coupon:13.91, koP:100, strikeP:75, kiP:55 },
                        { id:9, client:'江雪嬌', sn:'SNUBSELN01039', currency:'USD', amount:10, date:'2025/12/29', expiry:'2026/09/11', stocks:[{code:'ARM US', ko:111, current:116},{code:'MU US', ko:294, current:340},{code:'NVDA US', ko:188, current:189},{code:'TSLA US', ko:460, current:431}], sales:'陳雅鈴', coupon:19.17, koP:100, strikeP:75, kiP:65 },
                        { id:10, client:'吳適玲', sn:'SNUBSELN00988', currency:'JPY', amount:5300, date:'2025/12/04', expiry:'2026/06/16', stocks:[{code:'6857 JP', ko:19665, current:20555},{code:'7011 JP', ko:3846, current:4233},{code:'7012 JP', ko:10146, current:11955}], sales:'吳坤達', coupon:13.76, koP:95, strikeP:70, kiP:60 },
                        { id:11, client:'蔡玉梅', sn:'SNUBSELN00988', currency:'JPY', amount:500, date:'2025/12/04', expiry:'2026/06/16', stocks:[{code:'6857 JP', ko:19665, current:20555},{code:'7011 JP', ko:3846, current:4233},{code:'7012 JP', ko:10146, current:11955}], sales:'賴秋萍', coupon:13.76, koP:95, strikeP:70, kiP:60 },
                        { id:14, client:'佑昌投資', sn:'SNGSELN01264', currency:'JPY', amount:7000, date:'2025/12/01', expiry:'2026/06/10', stocks:[{code:'7013 JP', ko:2648, current:3144},{code:'7974 JP', ko:12673, current:10215},{code:'8035 JP', ko:30681, current:37120}], sales:'吳坤達', coupon:12.78, koP:97, strikeP:75, kiP:65 },
                        { id:18, client:'佑昌投資', sn:'SNMSELN02394', currency:'USD', amount:30, date:'2025/11/18', expiry:'2026/05/29', stocks:[{code:'AMZN US', ko:223, current:242, status:'KO'},{code:'ARM US', ko:136, current:116},{code:'AVGO US', ko:341, current:344, status:'KO'},{code:'TSM US', ko:278, current:319, status:'KO'}], sales:'吳坤達', coupon:12.26, koP:100, strikeP:75, kiP:65 },
                        { id:33, client:'吳柏輝', sn:'SNBARELN00369', currency:'USD', amount:30, date:'2025/10/15', expiry:'2026/04/27', stocks:[{code:'AVGO US', ko:334, current:344, status:'KO'},{code:'ORCL US', ko:288, current:193, status:'KI'}], sales:'吳坤達', coupon:12.0, koP:95, strikeP:70.44, kiP:60 },
                        { id:36, client:'吳適玲', sn:'SNBARELN00334', currency:'USD', amount:30, date:'2025/10/08', expiry:'2026/04/22', stocks:[{code:'AVGO US', ko:328, current:344, status:'KO'},{code:'ORCL US', ko:274, current:193, status:'KI'}], sales:'吳坤達', coupon:12.0, koP:95, strikeP:73.04, kiP:63 }
                    ]
                }
            },
            computed: {
                clientNames() { return [...new Set(this.inventory.map(i => i.client))].sort(); },
                totalJPY() { return this.inventory.filter(i => i.currency === 'JPY').reduce((s, i) => s + i.amount, 0); },
                totalUSD() { return this.inventory.filter(i => i.currency === 'USD').reduce((s, i) => s + i.amount, 0); },
                filteredList() { return this.inventory.filter(i => i.client === this.selectedClient); }
            },
            methods: {
                formatNum(n) { return Math.floor(n).toLocaleString(); },
                navClass(active) { return `p-4 rounded-2xl cursor-pointer transition flex items-center gap-3 font-black text-sm ${active ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-400 hover:bg-slate-800'}`; },
                getPerf(item, s) { if (s.status === 'KO') return item.koP; return ((s.current / s.ko) * item.koP).toFixed(2); },
                perfClass(item, s) { if (s.status === 'KO') return 'bg-emerald-500 text-white'; if (s.status === 'KI') return 'bg-rose-500 text-white animate-pulse'; const p = this.getPerf(item, s); if (p >= item.koP) return 'bg-emerald-500 text-white'; if (item.kiP > 0 && p <= item.kiP) return 'bg-rose-500 text-white'; return 'bg-blue-500/20 text-blue-400'; },
                goClient(name) { this.selectedClient = name; this.view = 'client'; }
            },
            mounted() {
                this.lastTime = new Date().toLocaleTimeString();
                setInterval(() => {
                    this.inventory.forEach(item => {
                        item.stocks.forEach(s => {
                            if (s.status !== 'KO') {
                                const change = (Math.random() - 0.5) * (s.current * 0.002);
                                s.current += change;
                                s.color = change > 0 ? 'text-emerald-400' : 'text-rose-400';
                            }
                        });
                    });
                    this.lastTime = new Date().toLocaleTimeString();
                }, 3000);
            }
        }).mount('#app')
    </script>
</body>
</html>
