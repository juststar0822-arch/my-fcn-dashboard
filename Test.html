<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>元大投資先生風格 - 智能條件單模擬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --yuanta-blue: #0056b3;
            --yuanta-dark: #0a0e14;
            --card-bg: #1c222d;
            --input-bg: #252d3a;
            --rise-red: #f23645;
            --fall-green: #089981;
        }
        body { background-color: var(--yuanta-dark); color: white; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .tab-active { color: white; border-bottom: 3px solid var(--yuanta-blue); font-weight: bold; }
        .tab-inactive { color: #848e9c; }
        .yuanta-btn { background: var(--yuanta-blue); border-radius: 25px; transition: all 0.2s; }
        .yuanta-btn:active { opacity: 0.8; transform: scale(0.98); }
        .input-box { background: var(--input-bg); border: 1px solid #363c4e; border-radius: 8px; color: white; }
        .stock-tag { background: #2a3240; border-radius: 4px; padding: 2px 6px; font-size: 12px; }
    </style>
</head>
<body class="flex justify-center items-start min-h-screen">

    <!-- 模擬手機容器 -->
    <div class="w-full max-w-md min-h-screen shadow-2xl overflow-hidden flex flex-col">
        
        <!-- Top Bar -->
        <div class="p-4 flex justify-between items-center border-b border-gray-800">
            <div class="flex items-center">
                <span class="text-xl font-bold">智能單設定</span>
            </div>
            <div class="text-right">
                <div class="text-xs text-gray-500">模擬資產</div>
                <div class="text-yellow-500 font-bold">$100,000</div>
            </div>
        </div>

        <!-- 股票名稱區 -->
        <div class="p-4 bg-[#161b22]">
            <div class="flex justify-between items-end">
                <div>
                    <span class="text-2xl font-bold">2330 台積電</span>
                    <span class="stock-tag ml-2 text-gray-400">現貨</span>
                </div>
                <div class="text-right">
                    <div id="price" class="text-2xl font-mono text-red-500 tracking-tighter">1,025.0</div>
                    <div class="text-xs text-red-500">+15.0 (+1.48%)</div>
                </div>
            </div>
        </div>

        <!-- 智能單類型切換 (模擬投資先生 Tab) -->
        <div class="flex justify-around bg-[#161b22] border-b border-gray-800 text-sm">
            <button onclick="setMode('trigger')" id="tab-trigger" class="py-3 px-4 tab-active">觸價才下單</button>
            <button onclick="setMode('oco')" id="tab-oco" class="py-3 px-4 tab-inactive">二擇一 (OCO)</button>
            <button onclick="setMode('trailing')" id="tab-trailing" class="py-3 px-4 tab-inactive">移動鎖利</button>
        </div>

        <!-- 設定內容區 -->
        <div class="p-4 space-y-5 flex-grow">
            
            <!-- 觸發條件 -->
            <div id="ui-trigger">
                <label class="text-sm text-gray-400 block mb-2">當股價</label>
                <div class="flex gap-2">
                    <select class="input-box p-3 w-1/3">
                        <option>大於等於</option>
                        <option>小於等於</option>
                    </select>
                    <input type="number" id="val1" class="input-box p-3 w-2/3" placeholder="請輸入觸發價">
                </div>
            </div>

            <div id="ui-oco" class="hidden space-y-4">
                <div>
                    <label class="text-sm text-gray-400 block mb-2">高價觸發 (停利)</label>
                    <input type="number" id="oco-high" class="input-box p-3 w-full" placeholder="設定較高價格">
                </div>
                <div>
                    <label class="text-sm text-gray-400 block mb-2">低價觸發 (停損)</label>
                    <input type="number" id="oco-low" class="input-box p-3 w-full" placeholder="設定較低價格">
                </div>
            </div>

            <div id="ui-trailing" class="hidden">
                <label class="text-sm text-gray-400 block mb-2">從最高點回檔金額 (元)</label>
                <input type="number" id="trail-val" class="input-box p-3 w-full" placeholder="例如: 10">
                <p class="text-xs text-gray-500 mt-2">※ 系統將自動追蹤最高價，當股價由高點回落此金額時執行賣出。</p>
            </div>

            <!-- 下單設定 -->
            <div class="border-t border-gray-800 pt-5 space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-sm">委託方式</span>
                    <div class="flex gap-2">
                        <button class="px-4 py-1 rounded bg-blue-900 border border-blue-500 text-xs">限價</button>
                        <button class="px-4 py-1 rounded bg-gray-700 text-xs">市價</button>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm">數量 (股)</span>
                    <input type="number" class="input-box p-2 w-32 text-right" value="1000">
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm">有效日期</span>
                    <span class="text-sm text-blue-400">至 2024/12/31 (長效)</span>
                </div>
            </div>
        </div>

        <!-- 底部按鈕 -->
        <div class="p-4 bg-[#161b22] border-t border-gray-800">
            <button onclick="confirmOrder()" class="yuanta-btn w-full py-4 font-bold text-lg shadow-lg">確認送出條件單</button>
        </div>

        <!-- 監控清單模擬 (抽屜感) -->
        <div class="bg-black p-4 min-h-[100px]">
            <div class="flex justify-between items-center mb-3">
                <span class="text-sm font-bold text-gray-400">監控中條件</span>
                <span id="order-count" class="text-xs bg-blue-600 px-2 py-0.5 rounded-full">0</span>
            </div>
            <div id="monitor-list" class="space-y-2">
                <!-- 條件單卡片 -->
            </div>
        </div>
    </div>

    <script>
        let mode = 'trigger';
        let currentPrice = 1025.0;
        let orders = [];

        // 模擬股價跳動
        setInterval(() => {
            const rand = (Math.random() - 0.5) * 2;
            currentPrice = parseFloat((currentPrice + rand).toFixed(1));
            const priceEl = document.getElementById('price');
            priceEl.innerText = currentPrice.toLocaleString(undefined, {minimumFractionDigits: 1});
            priceEl.className = rand > 0 ? 'text-2xl font-mono text-red-500 tracking-tighter' : 'text-2xl font-mono text-green-500 tracking-tighter';
            checkLogic();
        }, 1500);

        function setMode(m) {
            mode = m;
            document.getElementById('ui-trigger').classList.add('hidden');
            document.getElementById('ui-oco').classList.add('hidden');
            document.getElementById('ui-trailing').classList.add('hidden');
            document.getElementById(`ui-${m}`).classList.remove('hidden');

            document.getElementById('tab-trigger').className = 'py-3 px-4 ' + (m==='trigger'?'tab-active':'tab-inactive');
            document.getElementById('tab-oco').className = 'py-3 px-4 ' + (m==='oco'?'tab-active':'tab-inactive');
            document.getElementById('tab-trailing').className = 'py-3 px-4 ' + (m==='trailing'?'tab-active':'tab-inactive');
        }

        function confirmOrder() {
            let desc = "";
            if(mode === 'trigger') desc = "觸價 > " + document.getElementById('val1').value;
            if(mode === 'oco') desc = "OCO: " + document.getElementById('oco-low').value + "~" + document.getElementById('oco-high').value;
            if(mode === 'trailing') desc = "回檔 " + document.getElementById('trail-val').value + " 元";

            orders.push({ id: Date.now(), mode, desc, status: '監控中', peak: currentPrice });
            updateList();
            alert("條件單已啟動，開始監控行情");
        }

        function updateList() {
            const list = document.getElementById('monitor-list');
            document.getElementById('order-count').innerText = orders.filter(o => o.status === '監控中').length;
            list.innerHTML = '';
            orders.forEach(o => {
                list.innerHTML += `
                    <div class="bg-[#252d3a] p-3 rounded-lg border-l-4 ${o.status==='監控中'?'border-blue-500':'border-gray-500'}">
                        <div class="flex justify-between text-sm">
                            <span class="font-bold">2330 台積電</span>
                            <span class="${o.status==='監控中'?'text-blue-400':'text-gray-400'}">${o.status}</span>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">${o.desc}</div>
                    </div>
                `;
            });
        }

        function checkLogic() {
            orders.forEach(o => {
                if(o.status !== '監控中') return;
                // 這裡可以寫更複雜的觸發邏輯，滿足條件後變更狀態並 alert
            });
        }
    </script>
</body>
</html>
