<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>上新莊 All-in-One 專業系統</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-bg: #0a0e17; 
            --card-bg: #161c28;
            --accent-gold: #c5a368; 
            --accent-blue: #007aff;
            --text-main: #ffffff;
            --text-sub: #8e8e93;
            --header-height: 60px;
            --nav-height: 75px;
        }

        body, html {
            margin: 0; padding: 0;
            height: 100%; width: 100%;
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-main);
            overflow: hidden;
        }

        /* 頂部導航 */
        header {
            height: var(--header-height);
            background: rgba(10, 14, 23, 0.98);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            position: fixed;
            top: 0; width: 100%;
            box-sizing: border-box;
            z-index: 100;
            border-bottom: 1px solid rgba(197, 163, 104, 0.2);
        }

        .system-name {
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--accent-gold);
        }

        #home-btn {
            font-size: 1.4rem;
            color: var(--text-main);
            cursor: pointer;
            display: none; /* 進入功能後才會顯示 */
            padding: 5px 10px;
        }

        /* 主畫面內容區 */
        .main-container {
            margin-top: var(--header-height);
            height: calc(100% - var(--header-height) - var(--nav-height));
            overflow-y: auto;
            padding: 25px 20px;
            box-sizing: border-box;
        }

        .welcome-section {
            margin-bottom: 30px;
        }
        .welcome-section h1 { margin: 0; font-size: 1.6rem; font-weight: 700; }
        .welcome-section p { color: var(--accent-gold); margin: 8px 0 0; font-size: 0.9rem; opacity: 0.8; }

        /* 主選單卡片 */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .menu-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.2s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .menu-card:active { transform: scale(0.95); background: #1e2636; }
        .menu-card i {
            font-size: 2.2rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fff 0%, var(--accent-gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .menu-card span { font-weight: 500; font-size: 1.05rem; letter-spacing: 1px; }

        /* Iframe 滿版容器 */
        #content-frame-wrapper {
            display: none;
            position: fixed;
            top: var(--header-height);
            left: 0;
            width: 100%;
            height: calc(100% - var(--header-height)); 
            background: white;
            z-index: 50;
        }
        iframe { width: 100%; height: 100%; border: none; }

        /* 底部導航列 */
        .bottom-nav {
            height: var(--nav-height);
            background: #11161f;
            position: fixed;
            bottom: 0; width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
            border-top: 1px solid rgba(255,255,255,0.08);
            z-index: 90;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-sub);
            text-decoration: none;
            font-size: 0.75rem;
            flex: 1;
            transition: color 0.3s;
        }
        .nav-item i { font-size: 1.3rem; margin-bottom: 5px; }
        .nav-item span { font-weight: 400; }
        .nav-item:active { color: var(--accent-gold); }

        /* 隱藏元素邏輯 */
        .hidden { display: none !important; }
    </style>
</head>
<body>

<header>
    <div class="system-name">上新莊 ALL-IN-ONE</div>
    <div id="home-btn" onclick="goHome()">
        <i class="fa-solid fa-house-chimney"></i>
    </div>
</header>

<!-- 主選單 UI -->
<div class="main-container" id="main-ui">
    <div class="welcome-section">
        <h1 id="greeting">午安, 專業經理人</h1>
        <p><i class="fa-solid fa-shield-halved"></i> 專業資產管理系統已就緒</p>
    </div>

    <div class="menu-grid">
        <div class="menu-card" onclick="loadTool('query')">
            <i class="fa-solid fa-magnifying-glass-chart"></i>
            <span>FCN報價</span>
        </div>
        <div class="menu-card" onclick="loadTool('quote')">
            <i class="fa-solid fa-file-invoice-dollar"></i>
            <span>FCN詢價</span>
        </div>
        <div class="menu-card" onclick="loadTool('cashflow')">
            <i class="fa-solid fa-chart-line"></i>
            <span>現金流</span>
        </div>
        <div class="menu-card" onclick="loadTool('yuanta')">
            <i class="fa-solid fa-gem"></i>
            <span>元元致富</span>
        </div>
    </div>
</div>

<!-- Iframe 承載區 -->
<div id="content-frame-wrapper">
    <iframe id="target-frame" src=""></iframe>
</div>

<!-- 底部選單 -->
<nav class="bottom-nav" id="bottom-bar">
    <div class="nav-item" onclick="loadTool('query')">
        <i class="fa-solid fa-magnifying-glass-chart"></i>
        <span>FCN詢價</span>
    </div>
    <div class="nav-item" onclick="loadTool('quote')">
        <i class="fa-solid fa-file-invoice-dollar"></i>
        <span>FCN報價</span>
    </div>
    <div class="nav-item" onclick="loadTool('cashflow')">
        <i class="fa-solid fa-chart-line"></i>
        <span>現金流</span>
    </div>
    <div class="nav-item" onclick="loadTool('yuanta')">
        <i class="fa-solid fa-gem"></i>
        <span>元元致富</span>
    </div>
</nav>

<script>
    // 依據您的需求對應網址
    const pages = {
        'query': 'https://juststar0822-arch.github.io/my-fcn-dashboard/quote.html',      // FCN詢價
        'quote': 'https://juststar0822-arch.github.io/my-fcn-dashboard/simulator.html',  // FCN報價
        'cashflow': 'https://juststar0822-arch.github.io/my-fcn-dashboard/cashflow.html',// 現金流
        'yuanta': 'https://juststar0822-arch.github.io/my-fcn-dashboard/yuanta_pro.html' // 元元致富
    };

    function loadTool(key) {
        const url = pages[key];
        const wrapper = document.getElementById('content-frame-wrapper');
        const frame = document.getElementById('target-frame');
        const homeBtn = document.getElementById('home-btn');
        const bottomBar = document.getElementById('bottom-bar');
        const mainUi = document.getElementById('main-ui');

        // 1. 載入內容並顯示容器
        wrapper.style.display = 'block';
        frame.src = url;

        // 2. 顯示頂部「房屋」按鈕
        homeBtn.style.display = 'block';

        // 3. 隱藏下方導航與主選單 (沉浸模式)
        bottomBar.classList.add('hidden');
        mainUi.classList.add('hidden');
    }

    function goHome() {
        const wrapper = document.getElementById('content-frame-wrapper');
        const frame = document.getElementById('target-frame');
        const homeBtn = document.getElementById('home-btn');
        const bottomBar = document.getElementById('bottom-bar');
        const mainUi = document.getElementById('main-ui');

        // 1. 隱藏並清空 Iframe
        wrapper.style.display = 'none';
        frame.src = "";

        // 2. 隱藏頂部「房屋」按鈕
        homeBtn.style.display = 'none';

        // 3. 恢復顯示導航與主選單
        bottomBar.classList.remove('hidden');
        mainUi.classList.remove('hidden');
    }

    // 問候語邏輯
    function setGreeting() {
        const hr = new Date().getHours();
        let g = "您好, 專業經理人";
        if (hr < 5) g = "深夜了, 請注意休息";
        else if (hr < 12) g = "早安, 專業經理人";
        else if (hr < 18) g = "午安, 專業經理人";
        else g = "晚安, 專業經理人";
        document.getElementById('greeting').innerText = g;
    }
    setGreeting();
</script>

</body>
</html>
